{% extends "layouts/base.njk" %}
{% from "partials/icon.njk" import icon %}

{% block header %}
  {% include "partials/header.njk" %}
{% endblock %}

{% block content %}
  {% set samlingInfo = (samling | getSamling) or { title: samling, icon: 'folder' } %}
  {% set estimatedReadingTime = readingTime %}
  {% if not estimatedReadingTime and content %}
    {% set estimatedReadingTime = content | readingTime ~ ' min' %}
  {% endif %}

  <section class="max-w-6xl mx-auto px-4 sm:px-6 py-8 sm:py-12 article-shell">
    <article class="surface-card strong-card post-shell">
      <header class="post-header">
        <div class="post-icon" aria-hidden="true">
          {{ icon('books') }}
        </div>
        <p class="sr-only">
          Artikel{% if samling %} â€“ {{ samlingInfo.title }}{% endif %}
        </p>

        <h1 class="post-title">{{ title }}</h1>

        <div class="post-meta">
          <span>{{ icon('calendar') }} {{ date | formatDate }}</span>
          {% if estimatedReadingTime %}
            <span class="meta-divider" aria-hidden="true"></span>
            <span>{{ icon('hourglass') }} {{ estimatedReadingTime }}</span>
          {% endif %}
          {% if samling %}
            <span class="meta-divider" aria-hidden="true"></span>
            <a href="{{ baseUrl }}/samlingar/{{ samling }}/" class="post-meta-link">
              {{ icon(samlingInfo.icon) }} {{ samlingInfo.title }}
            </a>
          {% endif %}
        </div>

        {% if description %}
          <p class="post-lead">{{ description }}</p>
        {% endif %}
      </header>

      <div class="post-body">
        <div class="post-content">
          {{ content | safe }}
        </div>

        {% if references %}
          <div class="post-references">
            <p class="text-xs uppercase tracking-wide flex items-center gap-2">
              {{ icon('book') }} Referenser
            </p>
            <ol class="reference-list">
              {% for ref in references %}
                <li>{{ ref | markdownifyInline | safe }}</li>
              {% endfor %}
            </ol>
          </div>
        {% endif %}
      </div>
    </article>
  </section>
{% endblock %}
